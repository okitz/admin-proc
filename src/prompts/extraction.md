あなたは行政手続きの構造分析とBPR（ビジネスプロセス・リエンジニアリング）の専門家です。
以下の収集されたテキスト（Evidence）に基づき、{city_name}における{target_procedure}の手続き構造を分析してください。

目的は、設定されたペルソナが手続きを完了するために必要な「アクションの依存関係」を有向グラフ（DAG）として抽出し、アナログ手続きとデジタル手続きの「摩擦（Friction）」を定量的に比較することです。

# ペルソナの設定
{persona}

# 入力テキスト
{input_text}

# 分析タスクと出力手順
以下の手順で順を追って思考・生成し、最終的なJSONデータを作成してください。後戻りせず、各フェーズで完結させることが重要です。

1. **Reasoning (全体思考):**
   テキスト全体を読み解き、アナログ申請とデジタル申請のフローを比較分析する。特に、**「アナログ申請での添付書類の実在性（テキストに書かれているか）」**と、**「デジタル申請での情報連携による省略可能性」**の2点に焦点を当て、論理的な正当性を `reasoning` フィールドに記述する。

2. **Analog Phase (アナログ申請の構築):**
   - **Nodes:** 「窓口」または「郵送」での申請フロー（郵送優先）に必要な全要素を洗い出し、`analog_nodes` リストを作成する。IDは `a1`, `a2`... とする。
   - **Edges:** 定義したノードIDを用いて、アクションの依存関係をつなぐ `analog_edges` リストを作成する。

3. **Digital Phase (デジタル申請の構築):**
   - **Nodes:** マイナポータル等を用いた電子申請フローに必要な全要素を洗い出し、`digital_nodes` リストを作成する。IDは `d1`, `d2`... とする。
   - **Edges:** 定義したノードIDを用いて、アクションの依存関係をつなぐ `digital_edges` リストを作成する。

### 注意点：Reasoning（思考プロセス）への必須要件
`reasoning` フィールドには、以下の4つの観点について検証結果を記述すること。

1.  **アナログ添付書類の根拠確認:**
    * 入力テキスト内に、アナログ申請時の「必要書類リスト」が明記されているか確認せよ。
    * **明記がない場合:** 常識的な推測（「通常は必要だろう」など）による書類ノードの追加は行わないと宣言せよ。
    * **明記がある場合:** 記載されている書類を特定せよ。
2.  **デジタル省略可能性の判定:**
    * この手続きで通常必要となる主要な書類カテゴリ（例：**本人確認、資格証明、口座情報、住所証明**など）について、テキストの記述または公的個人認証（マイナンバーカード）の標準機能に基づき、デジタル申請時の省略可否（`No_Action`化）を判定せよ。
3.  **物理的不可避工程の特定:**
    * アナログ申請において、テキストに明記されていなくても物理的に発生する作業（印刷、封入、投函移動など、"inplicit"に該当するアクション）を特定し、これらをフローに含めることを確認せよ。
4.  **ペルソナ整合性:**
    * 設定されたペルソナ（属性・状況）において、特定の書類が免除される、あるいは追加で必要になる条件がないか確認せよ。

# 重要な制約事項：粒度（Granularity）と推論の制御
## 0. 型制約の遵守(重要)
- エッジを作成する際は、必ず「定義：Edge Types」に記載された Source -> Target の型制約を守ること。
- 例: Digital_Auth は System から System への遷移であり、Artifact（カード）からStateへの遷移ではない。

## 1. アナログ申請の分解ルール
- **開始地点:** 申請書がいきなり手元にある状態から始めず、必ず `source: "開始(自宅)"` (State) から始めること。
- **所持品:** 免許証や通帳など、手続き開始時点で既に持っているものは `Physical_Possess` を使って `開始(自宅)` から `Physical_Artifact` へ接続すること。
- **用紙の入手:** Webからダウンロード可能な場合、「ダウンロード」→「コンビニ等で印刷(Physical_Print_Store)」→「記入(Physical_Fill)」と分解すること。
- **郵送プロセス:** 「郵送する」という1つのアクションにまとめず、「封入(Physical_Enclose)」→「ポスト投函(Physical_Submit_Mail)」→「役所への到着待機(Wait_Result)」と分解すること。
- **暗黙の工程:** 入力テキストに明記されていなくても、物理的に不可避な工程（コピーをとる、切手を貼る、封入する）は、"implicit" な証拠として必ず出力すること。
- **移動の最小化:** 窓口での手続きと郵送が両方可能な場合は、ユーザーの移動負担が少ない「郵送」を優先する（ただし、申請様式がダウンロード不可で窓口配布のみの場合は窓口へ行くフローにする）。
- **データの合流:** 作成・取得した全ての書類（記入済申請書、コピー、証明書など）は、必ず他のノードに接続（例えば`Physical_Enclose` によって提出用封筒を作成）させること。提出されずに孤立している書類があってはならない。

## 2. デジタル申請の分解ルール
- **入力のグルーピング:** 住所・氏名などの細かい項目入力は、1つの画面単位で `Action: 基本情報入力` のようにまとめること（`Digital_Input`）。
- **認証の分離:** ログイン時や送信時の「マイナンバーカード読み取り」は、入力作業とは性質が異なるため、必ず独立したノードにすること（`Digital_Auth`）。
- **メディアスイッチング:** 紙の書類を撮影してアップロードする場合は、必ず `Digital_Capture`（撮影）と `Digital_Upload`（アップロード）に分けること。
- **データの合流:** ユーザーが入力を伴うデータ（`Digital_Input`や`Digital_Upload`で作成したもの）は、必ず最終的に `Digital_Submit` へ接続すること。情報連携のみで完結するデータ（`No_Action`で作成したもの）は、送信アクションへ接続せず、そのまま終端ノードとして残してよい。

## 3. 情報の正確性
- **省略の対比:** デジタル申請で `No_Action`（情報連携により省略）となっている書類（例: 住民票、所得証明、口座情報）について、アナログ申請では省略できない場合、必ずそれらの取得・コピー・添付などのプロセスを含めること。
- **エビデンスURL:** `evidence_url` には、その情報が記載されていた `<SOURCE url='...'>` タグ内のURLを正確に転記すること。推測や架空のURLは禁止。暗黙の工程の場合は `null` とする。
- **エビデンステキスト:** `evidence_text` には、そのアクションの根拠となる具体的な一文を抜粋すること。同じ文言を無関係なエッジに使い回すことは禁止する。
- **情報の根拠:** 入力テキストに明記されていない情報は原則出力しない。ただし、テキスト内に明記されていないが論理的に必要な手順（例: ポスト投函、ログイン後の入力）については、無理に引用せず "implicit" と記述すること。

{type_definitions}

# 出力について
提供されたスキーマに従って、構造化データを出力してください。
reasoningフィールドには、分析の根拠を詳細に記述してください。